<script>
  const $navAElements: Element[] = [...document.querySelectorAll('header nav a')]

  window.addEventListener('scroll', () => {
    $navAElements.forEach(a => {
      const selectionForSection = a.getAttribute('href')?.substring(1)
      const sectionElement: HTMLDivElement | null = document.querySelector(selectionForSection || '')

      if(!sectionElement) return
      const selectionTop = sectionElement.offsetTop - 150
      if(window.scrollY <= selectionTop) return
      $navAElements.forEach(aToRemove => aToRemove.classList.remove('bg-white/15'))
      a.classList.add('bg-white/15')
    })
  })
</script>

<header
  class={`
    flex justify-center items-center
    mx-auto
    py-5
    sticky top-0
    w-full xl:w-[1120px]
    z-10
  `}
>
  <nav id="header-nav">
    <a
      class="hover:bg-neutral-300 dark:hover:bg-white/10 rounded-full px-2 sm:px-3 transition text-sm sm:text-base"
      href="/#experiencia">Experiencia</a
    >
    <a
      class="hover:bg-neutral-300 dark:hover:bg-white/10 rounded-full px-2 sm:px-3 transition text-sm sm:text-base"
      href="/#proyectos">Proyectos</a
    >
    <a
      class="hover:bg-neutral-300 dark:hover:bg-white/10 rounded-full px-2 sm:px-3 transition text-sm sm:text-base"
      href="/#sobre-mi">Sobre m√≠</a
    >
    <a
      class="hover:bg-neutral-300 dark:hover:bg-white/10 rounded-full px-2 sm:px-3 transition text-sm sm:text-base"
      href="/#contacto">Contacto</a
    >
  </nav>
</header>
